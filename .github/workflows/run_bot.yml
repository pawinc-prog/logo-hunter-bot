name: Logo Hunter Automation

on:
  schedule:
    - cron: '*/15 * * * *' # à¸£à¸±à¸™à¸—à¸¸à¸à¹† 15 à¸™à¸²à¸—à¸µ
  workflow_dispatch: # à¸—à¸³à¹ƒà¸«à¹‰à¹€à¸£à¸²à¸¡à¸µà¸›à¸¸à¹ˆà¸¡à¸à¸”à¸ªà¸±à¹ˆà¸‡à¸£à¸±à¸™à¹€à¸­à¸‡à¹„à¸”à¹‰à¸”à¹‰à¸§à¸¢

jobs:
  run-bot:
    runs-on: ubuntu-latest
    steps:
      - name: à¸”à¸¶à¸‡à¹„à¸Ÿà¸¥à¹Œà¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”à¸¡à¸²à¸—à¸µà¹ˆà¹€à¸‹à¸´à¸£à¹Œà¸Ÿà¹€à¸§à¸­à¸£à¹Œ
        uses: actions/checkout@v3

      - name: à¸•à¸´à¸”à¸•à¸±à¹‰à¸‡ Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.10'

      - name: à¸•à¸´à¸”à¸•à¸±à¹‰à¸‡à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸¡à¸·à¸­ (Requirements)
        run: pip install -r requirements.txt

      - name: à¸”à¸²à¸§à¸™à¹Œà¹‚à¸«à¸¥à¸”à¸ªà¸¡à¸­à¸‡à¸à¸¥ AI ðŸ§ 
        run: wget "https://github.com/pawinc-prog/logo-hunter-bot/releases/download/v1.0/bigc_model.pth" -O bigc_model.pth

      - name: à¸ªà¸£à¹‰à¸²à¸‡à¸à¸¸à¸à¹à¸ˆà¹€à¸‚à¹‰à¸² Google Sheets
        run: echo "${{ secrets.GCP_CREDENTIALS }}" > credentials.json

      - name: à¸ªà¸•à¸²à¸£à¹Œà¸—à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸¢à¸™à¸•à¹Œ Logo Hunter! ðŸš€
        env:
          YOUTUBE_API_KEY: ${{ secrets.YOUTUBE_API_KEY }}
          APIFY_TOKEN: ${{ secrets.APIFY_TOKEN }}
          LINE_ACCESS_TOKEN: ${{ secrets.LINE_ACCESS_TOKEN }}
          SHEET_ID: ${{ secrets.SHEET_ID }}
          IMGBB_API_KEY: ${{ secrets.IMGBB_API_KEY }}
        run: python bot.py
